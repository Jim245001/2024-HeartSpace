@model HeartSpace.Models.PostViewModel

<div class="container" style="margin-top: 20px;">
    <!-- 貼文內容 -->
    <div class="post-section" style="border: 1px solid #ddd; padding: 20px; border-radius: 10px; background-color: #f8f9fa;">
        <!-- 標題與原PO資訊 -->
        <div style="display: flex; align-items: center; justify-content: space-between; border-bottom: 2px solid #007bff; padding-bottom: 10px;">
            <div>
                <h2 style="margin: 0; color: #007bff;">@Model.Title</h2>
                <p style="margin: 0; color: #6c757d;">分類：<strong>@Model.CategoryName</strong></p>
            </div>
            <div style="display: flex; align-items: center;">
                <img src="data:image/png;base64,@Model.MemberImg" alt="原PO頭像" style="width: 50px; height: 50px; border-radius: 50%; margin-right: 10px;">
                <span style="font-weight: bold; color: #495057;">@Model.MemberName</span>
            </div>
        </div>

        <!-- 貼文圖片 -->
        @if (!string.IsNullOrEmpty(Model.PostImg))
        {
            <div style="margin-top: 20px; text-align: center; background-color: #e9ecef; padding: 15px; border-radius: 10px;">
                <img src="data:image/png;base64,@Model.PostImg" alt="貼文圖片" style="max-width: 100%; height: auto; border-radius: 10px;">
            </div>
        }

        <!-- 貼文內容 -->
        <div class="post-content" style="margin-top: 20px; color: #212529;">
            <p>@Model.PostContent</p>
        </div>

        <!-- 修改與關閉按鈕 -->
        <div style="margin-top: 20px; text-align: right;">
            @if (ViewBag.CurrentUserId == Model.MemberId)
            {
                <button class="btn btn-danger" style="margin-right: 10px;">關閉</button>
                <button class="btn btn-primary">修改</button>
            }
        </div>
    </div>

    <!-- 留言區塊 -->
    <div class="comments-section" style="margin-top: 30px; border: 1px solid #ddd; padding: 20px; border-radius: 10px; background-color: #ffffff;">
        <h3 style="border-bottom: 2px solid #28a745; padding-bottom: 5px; color: #28a745;">留言板</h3>
        @if (Model.Comments != null && Model.Comments.Any())
        {
            <ul style="list-style: none; padding: 0;">
                @foreach (var comment in Model.Comments)
                {
                    <li style="margin-bottom: 15px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; background-color: #f8f9fa;">
                        <div style="display: flex; align-items: center;">
                            <img src="data:image/png;base64,@comment.AuthorImg" alt="留言者頭像" style="width: 30px; height: 30px; border-radius: 50%; margin-right: 10px;">
                            <strong style="color: #495057;">@comment.AuthorName</strong>
                            @if (ViewBag.CurrentUserId == comment.AuthorId)
                            {
                                <button class="btn btn-danger btn-sm" style="margin-left: auto;">刪除</button>
                            }
                        </div>
                        <p style="margin-left: 40px; margin-top: 10px; color: #212529;">@comment.Content</p>
                    </li>
                }
            </ul>
        }
        else
        {
            <p style="color: #6c757d;">目前沒有留言，快來搶沙發！</p>
        }

        <!-- 留言輸入框 -->
        <div class="add-comment" style="margin-top: 20px; background-color: #f8f9fa; padding: 15px; border-radius: 10px;">
            <h4 style="color: #17a2b8;">輸入你的留言：</h4>
            <form method="post" action="/Post/AddComment">
                <textarea name="Content" class="form-control" rows="3" placeholder="請輸入留言內容" required></textarea>
                <input type="hidden" name="PostId" value="@Model.Id" />
                <button type="submit" class="btn btn-success" style="margin-top: 10px;">送出留言</button>
            </form>
        </div>
    </div>
</div>
